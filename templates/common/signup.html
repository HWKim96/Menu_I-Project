{% extends "base.html" %}
{% block content %}


<div class="container my-3">
    <form method="post" action="{% url 'common:signup' %}">
        {% csrf_token %}
        {% include "form_errors.html" %}
        <div class="mb-3">
            <label for="username">사용자 이름</label>
            <input type="text" class="form-control" name="username" id="username"
                    value="{{ form.username.value|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label for="birth">생년월일</label>
            <input type="date" class="form-control" name="birth" id="birth"
                    value="{{ form.birth.value|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label for="password1">비밀번호</label>
            <input type="password" class="form-control" name="password1" id="password1"
                    value="{{ form.password1.value|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label for="password2">비밀번호 확인</label>
            <input type="password" class="form-control" name="password2" id="password2"
                    value="{{ form.password2.value|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label for="email">이메일</label>
            <input type="text" class="form-control" name="email" id="email"
                    value="{{ form.email.value|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label for="number">전화번호</label> <!-- label은 form field에 지정한 요소 적는건가봄--> 
            <input type="tel" class="form-control" name="number" id="number"
            pattern="[0-9]{3}-[0-9]{4}-[0-9]{4}" value="{{ form.number.value|default_if_none:'' }}">
            <small>예시 : xxx-xxxx-xxxx</small>
        </div>
        <div class="mb-3">
            <label for="address">주소</label>
            <input type="text" class="form-control" name="address" id="address"
                    value="{{ form.address.value|default_if_none:'' }}" readonly>
            <button type="button" class="btn btn-secondary" onclick="openDaumAddressPopup()">주소 검색</button>
        </div>
        <div class="mb-3">
            <label for="detail_address">상세 주소</label>
            <input type="text" class="form-control" name="detail_address" id="detail_address"
                    value="{{ form.detail_address.value|default_if_none:'' }}">
        </div>
        <button type="submit" class="btn btn-primary">생성하기</button>
    </form>
</div>

<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
    function openDaumAddressPopup() {
        new daum.Postcode({
            oncomplete: function(data) {
                document.getElementById('address').value = data.address;
            }
        }).open();
    }
</script>

{% endblock %}